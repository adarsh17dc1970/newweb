<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate Food - SharePlate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@lucide/web/dist/umd/lucide.js"></script>
</head>
<body class="bg-gray-50">
    <!-- Navbar (simplified version) -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center">
                        <i data-lucide="heart" class="h-8 w-8 text-rose-500"></i>
                        <span class="ml-2 text-xl font-bold text-gray-800">SharePlate</span>
                    </a>                </div>

                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-600 hover:text-rose-500">Home</a>
                    <a href="donate.html" class="text-rose-500">Donate Food</a>
                    <a href="volunteer.html" class="text-gray-600 hover:text-rose-500">Volunteer</a>
                    <a href="impact.html" class="text-gray-600 hover:text-rose-500">Impact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Donation Form Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="max-w-3xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-900 text-center mb-8">Donate Surplus Food</h1>
    
            <div class="bg-white rounded-lg shadow-lg p-6 md:p-8">
                <form id="donationForm" class="space-y-6" action="/submit-donation" method="POST">
    
                    <!-- Event Details -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Event Details</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="eventName" class="block text-sm font-medium text-gray-700">Event Name</label>
                                <input type="text" id="eventName" name="eventName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                            <div>
                                <label for="eventType" class="block text-sm font-medium text-gray-700">Event Type</label>
                                <select id="eventType" name="eventType" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                                    <option value="Wedding">Wedding</option>
                                    <option value="Corporate Event">Corporate Event</option>
                                    <option value="Conference">Conference</option>
                                    <option value="Party">Party</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label for="eventDate" class="block text-sm font-medium text-gray-700">Date</label>
                                <input type="date" id="eventDate" name="eventDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                            <div>
                                <label for="eventTime" class="block text-sm font-medium text-gray-700">Expected Time</label>
                                <input type="time" id="eventTime" name="eventTime" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                        </div>
                    </div>
    
                    <!-- Food Details -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Food Details</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="foodType" class="block text-sm font-medium text-gray-700">Type of Food</label>
                                <div id="foodType" class="mt-2 grid grid-cols-2 gap-2">
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" name="foodType" value="Vegetarian" class="rounded border-gray-300 text-rose-500 focus:ring-rose-500">
                                        <span class="ml-2">Vegetarian</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" name="foodType" value="Non-Vegetarian" class="rounded border-gray-300 text-rose-500 focus:ring-rose-500">
                                        <span class="ml-2">Non-Vegetarian</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" name="foodType" value="Vegan" class="rounded border-gray-300 text-rose-500 focus:ring-rose-500">
                                        <span class="ml-2">Vegan</span>
                                    </label>
                                    <label class="inline-flex items-center">
                                        <input type="checkbox" name="foodType" value="Desserts" class="rounded border-gray-300 text-rose-500 focus:ring-rose-500">
                                        <span class="ml-2">Desserts</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label for="servings" class="block text-sm font-medium text-gray-700">Estimated Servings</label>
                                <input type="number" id="servings" name="servings" min="1" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                            <div>
                                <label for="foodDescription" class="block text-sm font-medium text-gray-700">Food Description</label>
                                <textarea id="foodDescription" name="foodDescription" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500" placeholder="Please describe the food items..."></textarea>
                            </div>
                        </div>
                    </div>
    
                    <!-- Contact Information -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Contact Information</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="donorName" class="block text-sm font-medium text-gray-700">Name</label>
                                <input type="text" id="donorName" name="donorName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700">Phone</label>
                                <input type="tel" id="phone" name="phone" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500">
                            </div>
                            <div class="md:col-span-2">
                                <label for="pickupAddress" class="block text-sm font-medium text-gray-700">Pickup Address</label>
                                <textarea id="pickupAddress" name="pickupAddress" rows="2" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-rose-500 focus:ring-rose-500"></textarea>
                            </div>
                        </div>
                    </div>
    
                    <div class="flex justify-end">
                        <button type="submit" class="bg-rose-500 text-white px-6 py-3 rounded-md hover:bg-rose-600 flex items-center">
                            Submit Donation
                            <i data-lucide="arrow-right" class="ml-2 h-5 w-5"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>    

    <script>
        lucide.createIcons();

        document.getElementById('donationForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            try {
                const response = await fetch('/submit-donation', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data),
                });

                const result = await response.json();
                alert(result.message);
            } catch (error) {
                console.error('Error submitting the form:', error);
                alert('Something went wrong. Please try again later.');
            }
        });

        document.getElementById('donationForm').addEventListener('submit', function (event) {
        const form = event.target;

        // Date and Time Validation
        const eventDate = new Date(form.eventDate.value);
        const eventTime = form.eventTime.value;
        const currentDateTime = new Date();
        const selectedDateTime = new Date(`${form.eventDate.value}T${eventTime}`);

        if (eventDate < currentDateTime.setHours(0, 0, 0, 0) || selectedDateTime < currentDateTime) {
            // alert('The event date and time cannot be in the past.');
            event.preventDefault(); // Prevent form submission
            return;
        }

        // Phone Number Validation
        const phone = form.phone.value.trim();
        if (!/^\d{10}$/.test(phone)) {
            // alert('Please enter a valid 10-digit phone number.');
            event.preventDefault(); // Prevent form submission
            return;
        }
    });

    </script>
</body>
</html>
